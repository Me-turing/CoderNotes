---
title: 索引和视图
icon: file
order: 1
author: 十七
date: 2023-06-15 周四
category:
- 初级开发工程师
tag:
- P5
sticky: true
index: true
---


## 索引 INDEX

### 概念

索引是一种**排好序的快速查找的数据结构**，它**帮助数据库高效的进行数据的检索**。在数据之外，数据库系统还维护着满足特定查找算法的数据结构（额外的存储空间），这些数据结构以某种方式指向数据，这样就可以在这些数据结构上实现高效的查找算法。这种数据结构就叫做索引。

一般来说索引本身也很大，不可能全部存储在内存中，因此往往**以索引文件的形式存放在磁盘**中。目前**大多数索引都采用BTree树方式构建**。

### 优势与劣势

#### 优点

1.  索引是数据库优化， 加快了数据的查询速度(select)
2.  表的主键会默认自动创建索引
3.  每个字段都可以被索引
4.  大量降低数据库的IO磁盘读写成本，极大提高了检索速度
5.  索引事先对数据进行了排序，大大提高了查询效率
6. 
#### 缺点

1.  索引本身也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也要占用空间
2.  索引表中的内容，在业务表中都有，数据是重复的，空间是“浪费的”
3.  虽然索引大大提高了查询的速度，但对数据的增、删、改的操作需要更新索引表信息，如果数据量非常巨大， 更新效率就很慢， 因为**更新表时， MySQL不仅要保存数据， 也要保存一下索引文件**
4.  随着业务的不断变化，之前建立的索引可能不能满足查询需求，**需要消耗我们的时间去更新索引**

### 分类

1.  **单值索引** : 一个索引只包括一个列，一个表可以有多个列
2.  **唯一索引** : 索引列的值必须唯一，但允许有空值；主键会自动创建唯一索引
3.  **复合索引** : 一个索引同时包括多列

### 使用

#### 查看索引

```sql
SHOW INDEX FROM 表名
```

#### 创建索引

##### 创建单值索引

```sql
CREATE INDEX 索引名 ON 表名 (字段名);
```

##### 创建唯一索引

```sql
CREATE UNIQUE INDEX 索引名 ON 表名(字段名)
```

##### 创建复合索引

```sql
CREATE INDEX 索引名 ON 表名(字段名1,字段名2)

```

不遵循最左原则，可能会出现复合索引失效

> **最左原则** :
> 当我们创建一个联合索引（复合索引）的时候。如(k1,k2,k3)，相当于创建了（k1）、(k1,k2)和(k1,k2,k3)三个索引，这就是最左匹配原则，也称为最左特性。

#### 删除索引

```sql
ALTER TABLE 表名称 DROP INDEX 索引名;
```

> 面试题：如何判断一条sql执行的性能是否高效（是否使用索引）？
>> 使用EXPLAIN关键字与SQL语句一起执行查看

## 视图 VIEW

视图是一张特殊的表，里面存放的是上次查询的结果

### 视图的使用

#### 创建视图

```sql
CREATE VIEW 视图名 as SELECT语句
```

#### 使用视图

```sql
SELECT * FROM 视图名
```

#### 删除视图

```sql
DROP VIEW 视图名
```

### 视图的优点

1.  提高了SQL的复用性
2.  屏蔽了业务表的复杂性
3.  数据共享

### 视图的缺点

1.  是一张单独的表存了业务表的数据，造成了数据重复
2.  视图无法优化
